<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile | Admin Dashboard</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../../assets/images/logo.svg">
    <!-- Include Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <!-- Custom Admin CSS -->
    <link rel="stylesheet" href="../../../assets/css/admin.css">
</head>
<body class="g-sidenav-show bg-gray-100">
    <!-- Include admin-base.html sidebar -->

    <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg">
        <!-- Navbar -->
        <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl">
            <div class="container-fluid py-1 px-3">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0">
                        <li class="breadcrumb-item text-sm"><a href="admin-dashboard.html">Admin</a></li>
                        <li class="breadcrumb-item text-sm"><a href="manage-users.html">Users</a></li>
                        <li class="breadcrumb-item text-sm active" aria-current="page">User Profile</li>
                    </ol>
                </nav>
            </div>
        </nav>

        <div class="container-fluid py-4">
            <div class="row">
                <!-- User Profile Card -->
                <div class="col-lg-4">
                    <div class="card mb-4">
                        <div class="card-body text-center">
                            <div class="avatar-upload mb-3">
                                <div class="avatar avatar-xl position-relative">
                                    <img src="/assets/images/profile.svg" 
                                         alt="Profile" 
                                         id="userProfileImage"
                                         class="rounded-circle"
                                         style="width: 120px; height: 120px; object-fit: cover;"
                                         onerror="handleImageError(this)">
                                    <label for="profileImageInput" class="position-absolute bottom-0 end-0 mb-1 me-1">
                                        <div class="btn btn-sm btn-primary rounded-circle">
                                            <i class="bi bi-camera-fill"></i>
                                        </div>
                                        <input type="file" 
                                               id="profileImageInput" 
                                               class="d-none" 
                                               accept="image/*"
                                               onchange="updateProfileImage(this)">
                                    </label>
                                    <span class="badge badge-sm bg-gradient-success position-absolute bottom-0 start-0">Active</span>
                                </div>
                            </div>
                            <h5 class="mb-1">System Administrator</h5>
                            <p class="text-muted mb-3">Admin</p>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editUserModal">
                                    <i class="bi bi-pencil-square me-2"></i>Edit Profile
                                </button>
                                <button class="btn btn-outline-danger" onclick="deactivateAccount()">
                                    <i class="bi bi-person-x me-2"></i>Deactivate Account
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h6 class="mb-0">Contact Information</h6>
                        </div>
                        <div class="card-body">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <span><i class="bi bi-envelope me-2"></i>Email</span>
                                    <span class="text-muted">admin@thrashandtreasure.com</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <span><i class="bi bi-phone me-2"></i>Phone</span>
                                    <span class="text-muted">+60 234 567 890</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <span><i class="bi bi-geo-alt me-2"></i>Location</span>
                                    <span class="text-muted">Cyberjaya, MY</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Activity Tabs -->
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header">
                            <ul class="nav nav-tabs card-header-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-bs-toggle="tab" href="#activity">Activity Log</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#listings">Listings</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" href="#transactions">Transactions</a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content">
                                <!-- Activity Log Tab -->
                                <div class="tab-pane fade show active" id="activity">
                                    <div class="timeline">
                                        <!-- Activity items -->
                                        <div class="timeline-item">
                                            <div class="timeline-badge bg-info">
                                                <i class="bi bi-person"></i>
                                            </div>
                                            <div class="timeline-content">
                                                <h6 class="text-dark text-sm font-weight-bold mb-0">Updated profile picture</h6>
                                                <p class="text-secondary font-weight-bold text-xs mt-1 mb-0">22 DEC 7:20 PM</p>
                                            </div>
                                        </div>
                                        <!-- More activity items... -->
                                    </div>
                                </div>

                                <!-- Listings Tab -->
                                <div class="tab-pane fade" id="listings">
                                    <!-- Listings content -->
                                </div>

                                <!-- Transactions Tab -->
                                <div class="tab-pane fade" id="transactions">
                                    <!-- Transactions content -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Core JS Files -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function updateProfileImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                const img = document.getElementById('userProfileImage');
                
                reader.onload = function(e) {
                    img.src = e.target.result;
                    // Here you would typically upload the image to your server
                    saveProfileImage(input.files[0]);
                };
                
                reader.readAsDataURL(input.files[0]);
            }
        }

        function saveProfileImage(file) {
            // Here you would implement the actual image upload to server
            // For now, we'll just show a success message
            setTimeout(() => {
                alert('Profile image updated successfully!');
            }, 500);
        }

        function handleImageError(img) {
            console.error('Failed to load image:', img.src);
            img.src = '/assets/images/avatars/default-avatar.png';
            img.onerror = null;
        }

        function deactivateAccount() {
            if (confirm('Are you sure you want to deactivate this account?')) {
                // Handle account deactivation
                alert('Account deactivated successfully!');
            }
        }
    </script>
</body>
</html> 